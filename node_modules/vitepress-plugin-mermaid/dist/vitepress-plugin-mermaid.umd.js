(function(u,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(u=typeof globalThis<"u"?globalThis:u||self,a(u.MermaidPlugin={}))})(this,function(u){"use strict";const a=n=>{const c=l=>{function t(e,r){for(;e.length<r;)e="0"+e;return e}function i(e,r){var d,m,o;if(r.length===0)return e;for(d=0,o=r.length;d<o;d++)m=r.charCodeAt(d),e=(e<<5)-e+m,e|=0;return e<0?e*-2:e}function M(e,r,d){return Object.keys(r).sort().reduce(m,e);function m(o,v){return s(o,r[v],v,d)}}function s(e,r,d,m){var o=i(i(i(e,d),p(r)),typeof r);return r===null?i(o,"null"):r===void 0?i(o,"undefined"):typeof r=="object"?m.indexOf(r)!==-1?i(o,"[Circular]"+d):(m.push(r),M(o,r,m)):i(o,r.toString())}function p(e){return Object.prototype.toString.call(e)}return t(s(0,l,"",[]).toString(16),8)},f=n.renderer.rules.fence.bind(n.renderer.rules);n.renderer.rules.fence=(l,t,i,M,s)=>{const p=l[t];if(p.info.trim()==="mermaid")try{const e=p.content.trim();return`<Mermaid id="${`mermaid_${c(t)}`}"  graph="${encodeURIComponent(e)}"></Mermaid>`}catch(e){return`<pre>${e}</pre>`}return p.info.trim()==="mmd"&&(l[t].info="mermaid"),f(l,t,i,M,s)}},y={securityLevel:"loose",startOnLoad:!1};function g(n){const c={...y,...n},f="virtual:mermaid-config",l="\0"+f;return{name:"vite-plugin-mermaid",enforce:"post",transform(t,i){if(i.includes("vitepress/dist/client/app/index.js"))return t=`
import Mermaid from 'vitepress-plugin-mermaid/Mermaid.vue';
`+t,t=t.replace("// install global components",`// install global components
		app.component('Mermaid', Mermaid);
`),{code:t,map:null}},async resolveId(t){if(t===f)return l},async load(t){if(t===l)return`export default ${JSON.stringify(c)};`}}}const b=n=>{n.markdown||(n.markdown={});const c=n.markdown.config||(()=>{});return n.markdown.config=(...f)=>{a(...f),c(...f)},n.vite||(n.vite={}),n.vite.plugins||(n.vite.plugins=[]),n.vite.plugins.push(g(n.mermaid)),n};u.MermaidMarkdown=a,u.MermaidPlugin=g,u.withMermaid=b,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
